"0","library(networkD3)"
"0","library(reshape2)"
"0","df <- read.csv(""~/Downloads/YRIA.csv"")"
"0",""
"0","family_genus <- df[c('family', 'genus', 'Abundance')]"
"0","names(family_genus) <- c('source', 'target', 'Abundance')"
"0","order_family <- aggregate(df$Abundance, by = list(df$order, df$family), FUN = sum)"
"0","names(order_family) <- c('source', 'target', 'Abundance')"
"0","class_order <- aggregate(df$Abundance, by = list(df$class, df$order), FUN = sum)"
"0","names(class_order) <- c('source', 'target', 'Abundance')"
"0","phylum_class <- aggregate(df$Abundance, by = list(df$phylum, df$class), FUN = sum)"
"0","names(phylum_class) <- c('source', 'target', 'Abundance')"
"0",""
"0","link_list <- rbind(phylum_class, class_order, order_family, family_genus)"
"0","node_list <- melt(df, id = 'Abundance')"
"0","node_list <- node_list[!duplicated(node_list$value), ]"
"0",""
"0","link_list$sourceID <- match(link_list$source, node_list$value) - 1 "
"0","link_list$targetID <- match(link_list$target, node_list$value) - 1"
"0",""
"0","sankeyNetwork(Links = link_list, Nodes =  node_list,"
"0","              Source = 'sourceID', Target = 'targetID', Value = 'Abundance', "
"0","              NodeID = 'value', NodeGroup = 'variable', fontFamily = ""serif"","
"0","              fontSize = 12, sinksRight = F)"
